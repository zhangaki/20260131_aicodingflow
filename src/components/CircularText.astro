---
interface Props {
  text: string;
  spinDuration?: number;
  onHover?: 'speedUp' | 'slowDown' | 'pause' | 'goBonkers';
  className?: string;
}

const { text, spinDuration = 20, onHover = 'speedUp', className = '' } = Astro.props;
const letters = text.split('');
const deg = 360 / letters.length;
---

<div 
  class:list={["circular-text", className]} 
  style={`--spin-duration: ${spinDuration}s;`}
>
  <div class:list={["spinning-container", onHover]}>
    {letters.map((letter, i) => (
      <span 
        style={`transform: rotate(${deg * i}deg);`}
        class="letter"
      >{letter}</span>
    ))}
  </div>
</div>

<style>
  .circular-text {
    width: 200px;
    height: 200px;
    margin: 0 auto;
    position: relative;
    border-radius: 50%;
    color: #fff;
    font-weight: 900;
    cursor: pointer;
  }

  .spinning-container {
    width: 100%;
    height: 100%;
    position: relative;
    animation: spin var(--spin-duration) linear infinite;
    transform-origin: center center;
  }

  /* Hover Effects */
  .spinning-container.speedUp:hover {
    animation-duration: calc(var(--spin-duration) / 4);
  }
  .spinning-container.slowDown:hover {
    animation-duration: calc(var(--spin-duration) * 2);
  }
  .spinning-container.pause:hover {
    animation-play-state: paused;
  }
  .spinning-container.goBonkers:hover {
    animation-duration: calc(var(--spin-duration) / 20);
    transform: scale(0.8);
  }

  .letter {
    position: absolute;
    top: 0;
    left: 50%;
    transform-origin: 0 100px; /* Half of container height (200px) */
    display: inline-block;
    width: 1px; /* Minimal width to avoid centering issues */
    text-align: center;
    font-size: 24px;
    backface-visibility: hidden; /* Smoother rotation */
  }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
</style>
